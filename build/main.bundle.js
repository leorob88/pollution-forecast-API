(()=>{let e=0,t=document.getElementById("query").value;async function o(t){const n=await fetch("https://api.waqi.info/feed/geo:45.4886;9.1647/?token=7e8106a0df6ae162711525d8c731a1a926efceb0"),a=await n.json();console.log(a),console.log(e),console.log(t);const i=await fetch(`/.netlify/functions/lambda?name=${t}`),s=await i.json();if(console.log(s),"Unknown station"==s.data)0==e?(document.getElementById("answer").innerHTML="I couldn't find any stations for pollution detection in the location you searched for.",new Promise(((e,t)=>navigator.geolocation.getCurrentPosition(e,t))).then((t=>{let n=t.coords;console.log(t),console.log("Current position:"),console.log(`Latitude : ${n.latitude}`),console.log(`Longitude: ${n.longitude}`),console.log(`(Accuracy: about ${n.accuracy} meters.`),e=1,o("geo:"+n.latitude.toString()+";"+n.longitude.toString())}))):document.getElementById("answer").innerHTML+=" I also tried to locate your position but still it has no stations for pollution detection.";else{let e,t=s.data.aqi;e=t>300?"hazardous":t>200?"very unhealthy":t>150?"unhealthy":t>100?"unhealthy for sensitive groups":t>50?"moderate":"good",document.getElementById("answer").innerHTML+=`The nearest station to your estimated position is in ${s.data.city.name}. The estimated AQI has a value of ${s.data.aqi}. The pollution rate is ${e}.`,document.getElementById("answer").innerHTML+=' For further details, you can check out the reference website infos <a href="https://www.airnow.gov/aqi/aqi-basics/">here</a>.'}}o("geo:45.4886;9.1647/?token=7e8106a0df6ae162711525d8c731a1a926efceb0"),o(t)})();