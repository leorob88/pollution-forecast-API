(()=>{var t,e;function n(t){console.log(t),fetch(`/.netlify/functions/lambda?${t}`).then((t=>t.json())).then((e=>{if(console.log(e),"Unknown station"==e.data)t.indexOf("city=")>-1?document.getElementById("answer").innerHTML="I couldn't find any stations for pollution detection in the location you searched for.":document.getElementById("answer").innerHTML="I couldn't find any stations for pollution detection with your current position.";else{let n,o=e.data.aqi;if(n=o>300?"hazardous":o>200?"very unhealthy":o>150?"unhealthy":o>100?"unhealthy for sensitive groups":o>50?"moderate":"good",t.indexOf("city=")>-1)document.getElementById("answer").innerHTML=`The estimated AQI for ${e.data.city.name} has a value of ${o}. The pollution rate is ${n}.`;else{const o=6371e3,a=e.data.city.geo[0],i=e.data.city.geo[1],s=t.substring(6,t.indexOf("&longi")),l=t.substring(t.indexOf("&longi")+7,t.length);console.log(s+" "+l);const r=a*Math.PI/180,c=s*Math.PI/180,d=(s-a)*Math.PI/180,h=(l-i)*Math.PI/180,u=Math.sin(d/2)*Math.sin(d/2)+Math.cos(r)*Math.cos(c)*Math.sin(h/2)*Math.sin(h/2),g=o*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))/1e3;console.log(g+" kilometers"),document.getElementById("answer").innerHTML=`The nearest station to your estimated position is in ${e.data.city.name}. The estimated AQI has a value of ${e.data.aqi}. The pollution rate is ${n}.`}}document.getElementById("answer").innerHTML+=' For further details, you can check out the reference website infos <a target="_blank" href="https://www.airnow.gov/aqi/aqi-basics/">here</a>.'}))}new Promise(((t,e)=>navigator.geolocation.getCurrentPosition(t,e))).then((n=>{t=n.coords.latitude,e=n.coords.longitude})).catch((t=>console.log(t))),document.getElementById("butt0").addEventListener("click",(function(){n(`city=${document.getElementById("query").value}`)})),document.getElementById("butt2").addEventListener("click",(function(){n(`latit=${t}&longi=${e}`)}))})();