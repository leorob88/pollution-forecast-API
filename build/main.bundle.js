(()=>{var e;navigator.geolocation.getCurrentPosition((function(o){e=o.coords,console.log(o),console.log("Current position:"),console.log(`Latitude : ${e.latitude}`),console.log(`Longitude: ${e.longitude}`),console.log(`(Accuracy: about ${e.accuracy} meters.`)}),(function(e){console.warn(`Error(${e.code}): ${e.message}`)}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0});var o=0,t=document.getElementById("query").value;!async function n(){const a=await fetch(`/.netlify/functions/lambda?name=${t}`),i=await a.json();if(console.log(i),"Unknown station"==i.data)0==o?(document.getElementById("answer").innerHTML="The location you searched for has no stations for pollution detection.",t=`geo:${e.latitude};${e.longitude}`,o=1,n()):document.getElementById("answer").innerHTML+=" I also tried to locate your position but still it has no stations for pollution detection.";else{var s,r=i.data.aqi;s=r>300?"hazardous":r>200?"very unhealthy":r>150?"unhealthy":r>100?"unhealthy for sensitive groups":r>50?"moderate":"good",document.getElementById("answer").innerHTML+=`The nearest station to your estimated position is in ${i.data.city.name}. The estimated AQI has a value of ${i.data.aqi}. The pollution rate is ${s}.`,document.getElementById("answer").innerHTML+=' For further details, you can check out the reference website infos <a href="https://www.airnow.gov/aqi/aqi-basics/">here</a>.'}}()})();